name: Deploy Role-Aware Conversational AI to SAP BTP

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Code
      uses: actions/checkout@v3

    - name: Install CF CLI v8
      run: |
        wget -q https://packages.cloudfoundry.org/stable?release=linux64-binary -O cf-cli.tgz
        tar -xzf cf-cli.tgz
        sudo mv cf8 /usr/local/bin/cf
        cf --version

    - name: Login to SAP BTP (AP21 Region)
      run: |
        cf login \
          -a https://api.cf.ap21.hana.ondemand.com \
          -u ${{ secrets.CF_USER }} \
          -p ${{ secrets.CF_PASSWORD }} \
          -o f19465b6trial \
          -s dev

    - name: Deploy Role-Aware AI Chatbot
      run: cf push
